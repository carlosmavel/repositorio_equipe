{% extends "base.html" %}
{% block title %}{{ 'Editar Sistema' if sistema else 'Novo Sistema' }}{% endblock %}
{% block content %}
<div class="container-fluid px-5 mt-3">
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-1 border-bottom">
    <h1 class="h2">{{ 'Editar Sistema' if sistema else 'Novo Sistema' }}</h1>
  </div>
  <form method="post" class="mt-3">
    <div class="mb-3">
      <label class="form-label">Nome *</label>
      <input type="text" name="nome" class="form-control" required value="{{ request.form.nome or (sistema.nome if sistema else '') }}">
    </div>
    <div class="mb-3">
      <label class="form-label">Descrição</label>
      <textarea name="descricao" class="form-control">{{ request.form.descricao or (sistema.descricao if sistema else '') }}</textarea>
    </div>
    <div class="mb-3">
      <label class="form-label">Responsável</label>
      <input type="text" name="responsavel" class="form-control" value="{{ request.form.responsavel or (sistema.responsavel if sistema else '') }}">
    </div>
    <div class="mb-3">
      <label class="form-label">Observações</label>
      <textarea name="observacoes" class="form-control">{{ request.form.observacoes or (sistema.observacoes if sistema else '') }}</textarea>
    </div>
    <div class="mb-3">
      <label class="form-label">Status</label>
      <select name="status" class="form-select">
        {% for st in status_options %}
        {% set selected = (request.form.status or (sistema.status if sistema else 'Ativo')) == st %}
        <option value="{{ st }}" {% if selected %}selected{% endif %}>{{ st }}</option>
        {% endfor %}
      </select>
    </div>
    <button type="submit" class="btn btn-primary">Salvar</button>
    <a href="{{ url_for('ordens_servico_bp.sistemas_list') }}" class="btn btn-secondary">Cancelar</a>
  </form>
</div>
{% endblock %}
