{% extends "base.html" %}
{% block title %}{{ 'Editar Equipamento' if equipamento else 'Novo Equipamento' }}{% endblock %}
{% block content %}
<div class="container-fluid px-5 mt-3">
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-1 border-bottom">
    <h1 class="h2">{{ 'Editar Equipamento' if equipamento else 'Novo Equipamento' }}</h1>
  </div>
  <form method="post" class="mt-3">
    <div class="mb-3">
      <label class="form-label">Nome *</label>
      <input type="text" name="nome" class="form-control" required value="{{ request.form.nome or (equipamento.nome if equipamento else '') }}">
    </div>
    <div class="mb-3">
      <label class="form-label">Patrimônio</label>
      <input type="text" name="patrimonio" class="form-control" value="{{ request.form.patrimonio or (equipamento.patrimonio if equipamento else '') }}">
    </div>
    <div class="mb-3">
      <label class="form-label">Serial</label>
      <input type="text" name="serial" class="form-control" value="{{ request.form.serial or (equipamento.serial if equipamento else '') }}">
    </div>
    <div class="mb-3">
      <label class="form-label">Localização</label>
      <input type="text" name="localizacao" class="form-control" value="{{ request.form.localizacao or (equipamento.localizacao if equipamento else '') }}">
    </div>
    <div class="mb-3">
      <label class="form-label">Status</label>
      <select name="status" class="form-select">
        {% for st in status_options %}
        {% set selected = (request.form.status or (equipamento.status if equipamento else 'Operacional')) == st %}
        <option value="{{ st }}" {% if selected %}selected{% endif %}>{{ st }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="mb-3">
      <label class="form-label">Observações</label>
      <textarea name="observacoes" class="form-control">{{ request.form.observacoes or (equipamento.observacoes if equipamento else '') }}</textarea>
    </div>
    <button type="submit" class="btn btn-primary">Salvar</button>
    <a href="{{ url_for('ordens_servico_bp.equipamentos_list') }}" class="btn btn-secondary">Cancelar</a>
  </form>
</div>
{% endblock %}
