{% for bloco in estrutura %}
  {% if bloco.tipo == 'section' %}
    <div class="mb-4">
      {% if bloco.titulo %}<h5 class="mb-1">{{ bloco.titulo }}</h5>{% endif %}
      {% if bloco.subtitulo %}<p class="text-muted mb-2">{{ bloco.subtitulo }}</p>{% endif %}
      {% for campo in bloco.campos %}
        {% set valor = formulario_respostas.get(campo.id|string) if formulario_respostas else None %}
        <p class="ms-3 mb-1">{{ campo.label }}</p>
        {% if campo.subtitulo %}<p class="ms-3 text-muted mb-1">{{ campo.subtitulo }}</p>{% endif %}
        {% if valor is not none %}
          {% if valor is string %}
            <p class="ms-3 mb-2">{{ valor }}</p>
          {% else %}
            <p class="ms-3 mb-2">{{ valor | join(', ') }}</p>
          {% endif %}
        {% endif %}
      {% endfor %}
    </div>
  {% else %}
    {% set valor = formulario_respostas.get(bloco.id|string) if formulario_respostas else None %}
    <div class="mb-3">
      <p class="mb-1">{{ bloco.label }}</p>
      {% if bloco.subtitulo %}<p class="text-muted mb-1">{{ bloco.subtitulo }}</p>{% endif %}
      {% if valor is not none %}
        {% if valor is string %}
          <p class="mb-2">{{ valor }}</p>
        {% else %}
          <p class="mb-2">{{ valor | join(', ') }}</p>
        {% endif %}
      {% endif %}
    </div>
  {% endif %}
{% endfor %}
