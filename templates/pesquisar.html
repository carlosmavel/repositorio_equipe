{% extends "base.html" %}

{% block title %}Pesquisar{% endblock %}

{% block content %}
<div class="row">
  <div class="col-md-10 mx-auto">
    <div class="card shadow-sm mb-4">
      <div class="card-body">
        <form method="get" action="{{ url_for('pesquisar') }}" class="d-flex">
          <input
            name="q"
            value="{{ q }}"
            class="form-control me-2"
            placeholder="Buscar por título ou texto…"
          >
          <button class="btn btn-outline-primary">Pesquisar</button>
        </form>
      </div>
    </div>

    {% if artigos %}
      <div class="list-group">
        {% for artigo in artigos %}
          <a
            href="{{ url_for('artigo', artigo_id=artigo.id) }}"
            class="list-group-item list-group-item-action d-flex justify-content-between align-items-start"
          >
            <div>
              <div class="fw-bold">{{ artigo.titulo }}</div>
              <small class="text-muted">
                {{ artigo.local_created.strftime('%d/%m/%Y %H:%M') }}
              </small>
            </div>

            {# badge usando enum ArticleStatus diretamente #}
            {% set st = artigo.status %}
            <span class="badge rounded-pill bg-{{ st.color }} text-{{ st.text_color }}">
              {{ st.label }}
            </span>
          </a>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-muted mt-3">Nenhum artigo encontrado.</p>
    {% endif %}
  </div>
</div>
{% endblock %}